<div class="body" [ngClass]="{'body-dark':isDarkTheme}">

  <!-- Header -->
<header class="header" [ngClass]="{'header-dark':isDarkTheme}">
  <div class="logo" (click)="return()" translate="no">My-Bank</div>
  <div class="header-actions" [ngClass]="{'header-actions-dark':isDarkTheme}">
    <button *ngIf="isDarkTheme == true" class="theme-toggle" [ngClass]="{'theme-toggle-dark':isDarkTheme}" (click)="toggleTheme()">
      <svg
        class="sun"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <circle cx="12" cy="12" r="5" />
        <line x1="12" y1="1" x2="12" y2="3" />
        <line x1="12" y1="21" x2="12" y2="23" />
        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
        <line x1="1" y1="12" x2="3" y2="12" />
        <line x1="21" y1="12" x2="23" y2="12" />
        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
      </svg>
    </button>

    <button *ngIf="isDarkTheme == false" class="theme-toggle" [ngClass]="{'theme-toggle-dark':isDarkTheme}" (click)="toggleTheme()">
      <svg
        class="moon"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z" />
      </svg>
    </button>

    <div class="profile-icon"
    [ngClass]="{'profile-icon-dark':isDarkTheme}"
    (click)="openSidebarMenu = !openSidebarMenu">

    <svg
      class="menu-icon"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round">

      <line x1="3" y1="6" x2="21" y2="6" />
      <line x1="3" y1="12" x2="21" y2="12" />
      <line x1="3" y1="18" x2="21" y2="18" />
    </svg>

  </div>
  </div>
</header>



<!-- Sidebar -->
<div class="sidebar" [ngClass]="{'sidebar-open': openSidebarMenu}">
  <div class="sidebar-header">
    <h2 class="sidebar-title">Menu</h2>
  </div>
  <nav class="sidebar-nav">
    <ul class="sidebar-list">
      <li>
        <button class="sidebar-item" (click)="redirectForConfiguration()">
          <svg class="sidebar-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
          </svg>
          <span>Configuration</span>
        </button>
      </li>
      <li>
        <button type="button" class="sidebar-item" (click)="logout()">
          <svg class="sidebar-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
          </svg>
          <span>Exit</span>
        </button>
      </li>
    </ul>
  </nav>
  <div class="sidebar-footer">
    <button class="close-button" (click)="toggleSidebar()">Close</button>
  </div>
</div>
<!---->

<!-- Overlay -->
<div class="overlay" *ngIf="openSidebarMenu " (click)="toggleSidebar()"></div>
<!---->

<main class="container">
  <div class="page-title">
    <h1>All registered users</h1>
    <button (click)="return()" [ngClass]="{'button-dark':isDarkTheme}">
      <svg height="16" width="16" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 1024 1024"><path d="M874.690416 495.52477c0 11.2973-9.168824 20.466124-20.466124 20.466124l-604.773963 0 188.083679 188.083679c7.992021 7.992021 7.992021 20.947078 0 28.939099-4.001127 3.990894-9.240455 5.996574-14.46955 5.996574-5.239328 0-10.478655-1.995447-14.479783-5.996574l-223.00912-223.00912c-3.837398-3.837398-5.996574-9.046027-5.996574-14.46955 0-5.433756 2.159176-10.632151 5.996574-14.46955l223.019353-223.029586c7.992021-7.992021 20.957311-7.992021 28.949332 0 7.992021 8.002254 7.992021 20.957311 0 28.949332l-188.073446 188.073446 604.753497 0C865.521592 475.058646 874.690416 484.217237 874.690416 495.52477z"></path></svg>
      <span>Back</span>
    </button>
  </div>

  <div class="search-filter-container"
  [ngClass]="{'search-filter-container-dark':isDarkTheme}">
      <div class="search-filter-row">
          <div class="search-group" [ngClass]="{'search-group-dark':isDarkTheme}">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="search-icon">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
              </svg>
              <input type="text" placeholder="Search users..." class="search-input"
              [(ngModel)]="searchTerm"
              (ngModelChange)="currentPage = 1"
              [ngClass]="{'search-input-dark':isDarkTheme}">
          </div>
          <select class="filter-select"
          [(ngModel)]="statusFilter"
          (change)="currentPage = 1"
          [ngClass]="{'filter-select-dark':isDarkTheme}">
              <option value="all">All statuses</option>
              <option value="ACTIVE">ACTIVE</option>
              <option value="BLOCKED">BLOCKED</option>
          </select>
      </div>
  </div>

  <div class="documents-table-container" [ngClass]="{'documents-table-container-dark':isDarkTheme}">
      <div class="table-wrapper" [ngClass]="{'table-wrapper-dark':isDarkTheme}">
          <table *ngIf="loadingUsers == false">
              <thead [ngClass]="{'thead-dark':isDarkTheme}">
                  <tr>
                      <th>ID</th>
                      <th>CPF</th>
                      <th>FULLNAME</th>
                      <th>EMAIL</th>
                      <th>PHONE</th>
                      <th>DATE</th>
                      <th>AUTHENTICATED</th>
                      <th>ACTIONS</th>
                  </tr>
              </thead>
              <tbody [ngClass]="{'tbody-dark':isDarkTheme}">
                  <tr *ngFor="let user of paginatedUsers; let id = index">
                      <td>{{(currentPage - 1) * itemsPerPage + id + 1}}</td>
                      <td>{{user.cpf}}</td>
                      <td>{{user.fullName}}</td>
                      <td>{{user.email}}</td>
                      <td>{{user.phone}}</td>
                      <td>{{user.date}}</td>
                      <td style="padding-left: 50px;">{{user.authenticatedClient}}</td>
                      <td class="actions-cell">

                        <label class="lock-checkbox" (click)="blockUser(user.cpf)" *ngIf="user.role !== 'ADMIN'">
                          <input id="lock" type="checkbox" (click)="activeUser(user.cpf)" [checked]="user.status === 'BLOCKED' && user.role !== 'ADMIN'">
                          <span class="lock-icon">
                            <svg viewBox="0 0 24 24">
                              <path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM8.9 6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H8.9V6z"></path>
                            </svg>
                          </span>
                        </label>

                      </td>
                  </tr>
              </tbody>
          </table>

          <table *ngIf="loadingUsers == true">
            <thead [ngClass]="{'thead-dark':isDarkTheme}">
              <tr>
                <th style="text-align: center;">USERS</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <div style="display: flex; place-content: center;">
                    <div class="loader">
                      <div class="bar1"></div>
                      <div class="bar2"></div>
                      <div class="bar3"></div>
                      <div class="bar4"></div>
                      <div class="bar5"></div>
                      <div class="bar6"></div>
                      <div class="bar7"></div>
                      <div class="bar8"></div>
                      <div class="bar9"></div>
                      <div class="bar10"></div>
                      <div class="bar11"></div>
                      <div class="bar12"></div>
                    </div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>

          <div class="pagination" [ngClass]="{'pagination-dark':isDarkTheme}">
            <button class="pagination-btn" (click)="previousPage()" [disabled]="currentPage === 1">Previous</button>
            <span class="pagination-info">Page {{ currentPage }} of {{ totalPages }}</span>
            <button class="pagination-btn primary" (click)="nextPage()" [disabled]="currentPage === totalPages">Next</button>
          </div>
      </div>
  </div>
</main>
</div>

